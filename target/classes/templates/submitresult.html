<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">

<head>
    <title>Wordle Solver</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="font-family: sans-serif;font-size: 30px" onload="setFocusToTextBox()">
<h1>Wordle Solver</h1>
<form action="#" th:action="@{/}" th:object="${guess}" method="post">

    <!-- word field -->
    <p><span th:if="${guess == null || guess.nextBestWordToGuess == null}">Initial guess: </span>
        <span th:if="${guess != null && guess.nextBestWordToGuess != null}">Guess this word next: </span>
        <input style="font-family: sans-serif;font-size: 30px" type="text" th:field="*{wordGuessed}" />
    </p>

    <!-- result field -->
    <p>Result (e.g. bbyyg): <input style="font-family: sans-serif;font-size: 30px" type="text" th:field="*{result}" /></p>

    <!-- session id field (hidden) -->
    <input style="font-family: sans-serif;font-size: 30px" type="text" th:field="*{sessionId}" hidden/>

    <!-- Submit and Reset buttons -->
    <p><input style="font-family: sans-serif;font-size: 30px" type="submit" name="action" value="Submit" /> <input style="font-family: sans-serif;font-size: 30px" type="submit" name="action" value="Reset" /></p>

    <!-- Solution message -->
    <p><span th:if="${guess != null && guess.solution != null}">SOLUTION: </span>
        <strong><span th:if="${guess != null && guess.solution != null}" th:text="${guess.solution}"></span></strong>
    </p>

    <!-- Validation error -->
    <p style="color:red;" ><strong><span th:if="${guess != null && !guess.requestIsValid}">Invalid input: Please enter a 5 letter word and 5 letter result!</span></strong>
    </p>

</form>

<!-- Set focus to word field if initial guess -->
<script th:if="${guess == null || guess.nextBestWordToGuess == null}">
function setFocusToTextBox(){
    document.getElementById("wordGuessed").focus();
}
</script>

<!-- Set focus to result field if subsequent guess -->
<script th:if="${guess != null && guess.nextBestWordToGuess != null}">
function setFocusToTextBox(){
    document.getElementById("result").focus();
}
</script>

<!--Convert text fields to upper case-->
<!--<script>-->
<!--  const inputField = document.getElementById("wordGuessed");-->

<!--  inputField.addEventListener("keyup", function(event) {-->
<!--    event.preventDefault();-->
<!--    inputField.value = inputField.value.toUpperCase();-->
<!--  });-->
<!--</script>-->
<!--<script>-->
<!--  const inputField = document.getElementById("result");-->

<!--  inputField.addEventListener("keyup", function(event) {-->
<!--    event.preventDefault();-->
<!--    inputField.value = inputField.value.toUpperCase();-->
<!--  });-->
<!--</script>-->

</body>
</html>